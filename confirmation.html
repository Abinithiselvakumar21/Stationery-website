



<!-- confirmation.html -->
<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Order Confirmation</title>
  <style>
    body { font-family: Arial; text-align: center; padding: 2rem; }
    table { margin: auto; border-collapse: collapse; }
    th, td { border: 1px solid #ccc; padding: 8px; }
    img { width: 50px; border-radius: 4px; }
  </style>
</head>
<body>
  <h1>✅ Order Confirmed!</h1>
  <div id="orderDetails"></div>
  <a href="collection.html">Back to Products</a>

  <script>
    const order = JSON.parse(localStorage.getItem("lastOrder"));
    const container = document.getElementById("orderDetails");

    if (!order) {
      container.innerHTML = "<p>No order found</p>";
    } else {
      const date = new Date(order.ts).toLocaleString();
      let itemsHTML = "";

      order.items.forEach(item => {
        itemsHTML += `<tr><td><img src="${item.img}" alt="${item.name}"></td><td>${item.name}</td><td>₹${item.price}</td></tr>`;
      });

      const html = `
        <p><strong>Name:</strong> ${order.customerName}</p>
        <p><strong>Phone:</strong> ${order.phone}</p>
        <p><strong>Address:</strong> ${order.address}</p>
        <p><strong>Date:</strong> ${date}</p>
        <table>
          <tr><th>Image</th><th>Product</th><th>Price</th></tr>
          ${itemsHTML}
          <tr><td colspan="2"><strong>Total</strong></td><td><strong>₹${order.total}</strong></td></tr>
        </table>
      `;
      container.innerHTML = html;

       // Email sending
      emailjs.send("service_oqzt86n", "template_ri1e7r5", {
        customer_name: order.customerName,
        date: date,
        items: itemsText,
        total: order.total,
        to_email: "abikaavyastationery@gmail.com"
      }).then(() => {
        console.log("✅ Email sent");
      }).catch(err => {
        console.error("❌ Failed to send email:", err);
      });
    }
  </script>
</body>
</html>
